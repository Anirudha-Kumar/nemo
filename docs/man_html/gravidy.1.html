<!-- manual page source format generated by PolyglotMan v3.2, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>GRAVIDY1(1NEMO) manual page</title>
</head>
<body bgcolor='white'>
This HTML automatically generated with <A HREF=http://manpages.ubuntu.com/manpages/bionic/man1/rman.1.html>rman</A> for <A HREF=https://astronemo.readthedocs.io>NEMO</A><br>
<a href='#toc'>Table of Contents</a><p>

<p> 
<h2><a name='sect0' href='#toc0'>Name</a></h2>
gravidy, rungravidy - direct summation CPU/MPI/GPU hermite N-body integrator

<p>with variable block timesteps 
<p> 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>gravidy -i input_file ...</b> <p>
<b>rungravidy
in= outdir= ...</b> 
<p> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<i>GraviDy</i> is a direct-summation N-body integrator
based on the Hermite scheme. It can be compiled in a CPU (including openMP),
an MPI, and a GPU (using CUDA) version. Depending on your needs, a single
core version using GNU parallel can be a faster way to get survey results.
<p>
<i>gravidy</i> is not installed by default in NEMO. See INSTALL below. The <i>rungravidy</i>
NEMO frontend is available for those who want to work with NEMO&rsquo;s <a href='snapshot.5.html'><i>snapshot(5NEMO)</i></a>

files. 
<p> 
<h2><a name='sect3' href='#toc3'>Parameters</a></h2>
The following NEMO parameters are recognized for <b>rungravidy</b>,
where the correspoding short and long flag for <b>gravidy</b> is mentioned as
well: 
<dl>

<dt><b>in=</b> </dt>
<dd>Input file, required (-i --input) [???] </dd>

<dt><b>outdir=</b> </dt>
<dd>Output run directory,
required (-o --output) [???]  </dd>

<dt><b>eta=</b> </dt>
<dd>Time-step parameter for irregular force
polynomial (-e --eta) [0.01] </dd>

<dt><b>deltat=</b> </dt>
<dd>Output time interval in units of the crossing
(-z --interval)  [0.125] </dd>

<dt><b>tcrit=</b> </dt>
<dd>Termination time in units of the crossing time
(-t --time) [1] </dd>

<dt><b>eps=</b> </dt>
<dd>Gravitational softening parameter (-s --softening) [0.0001]
  </dd>

<dt><b>lagrange=</b> </dt>
<dd>Print information of the Lagrange Radii in every integration
time (-l --lagrange) [t] </dd>

<dt><b>all=</b> </dt>
<dd>Print all the information of N-particles in every
integration time (-a --all) [f] </dd>

<dt><b>gpu=</b> </dt>
<dd>GPUs to use, by default is the maximum
available devices (use even numbers) (-g --gpu) [0] </dd>

<dt><b>dryrun=</b> </dt>
<dd>If set, would
only display the shell commands  [f]       </dd>

<dt><b>exe=</b> </dt>
<dd>Name of the executable
[gravidy] </dd>
</dl>
<p>
Note the current version of <b>rungravidy</b> does not support the <b>-p</b>
(screen output) and <b>-r</b> (resume an old run) options. 
<p> <br>
<pre>GraviDy:
  -h [ --help ]         Display this message
Required options:
  -i [ --input ] &lt;filename&gt;       Input data filename
  -t [ --time ] &lt;value&gt; (=1)      Integration time (In N-body units)
  -r [ --resume ] &lt;filename&gt;.info Resume a simulation with an .info file
Elective options:
  -o [ --output ] &lt;filename&gt;      Output data filename
  -s [ --softening ] &lt;value&gt;      Softening parameter (default 1e-4)
  -e [ --eta ] &lt;value&gt;            ETA of time-step calculation (default 0.01)
  -p [ --screen ]                 Print summary in the screen instead of a
file
  -z [ --interval ] &lt;value&gt;       Output time interval (default 0.125)
Extra options:
  -l [ --lagrange ]               Print information of the Lagrange Radii
in every
                                  integration time
  -a [ --all ]                    Print all the information of N-particles
in every
                                  integration time
  -g [ --gpu ] &lt;value&gt; (=0)       GPUs to use, by default is the maximum available
                                  devices (use even numbers)
</pre>
<p> 
<h2><a name='sect4' href='#toc4'>Example</a></h2>
Here is an example integrating gravidy with NEMO files <br>
<pre>  mkplummer p128 128
  snapprint p128 i,m,x,y,z,vx,vy,vz format=%.15f &gt; p128.tab
  gravidy --input p128.tab --output p128 --interval 0.1 --time 10 --eta 0.01 --softening
0.05
  cat p128.out.snapshot_0* | sed &rsquo;s/# Time://&rsquo; | tabtos - - time skip,m,pos,vel
nbody=128 | csf - p128.out SnapShot
  
</pre>although note that the last snapshot (time=10.0 in this case) might be replicated
in versions of gravidy before June 2023. The <b>rungravidy</b> frontend would simplify
this to <br>
<pre>  mkplummer p128 128
  mkdir p128.d
  rungravidy p128 p128.d deltat=0.1 tcrit=10 eta=0.01 eps=0.05
  snapplot p128.d/OUT3.snap
  
</pre>with the caveat that <b>rungravidy</b> enforces the use of a run directory. 
<p> 
<h2><a name='sect5' href='#toc5'>Benchmark</a></h2>
The
<b>bench1</b> runs a single core OpenMP, a Plummer  1024 body integration to T=10.
<b>bench2</b> runs this same benchmark with 1,2,4 and 8 cores to check the OpenMP
performance. Note no output files are produced. <br>
<pre>   cd $NEMO/usr/gravidy
   make bench1
</pre>and some example timings <br>
<pre>k2-bat<tt> </tt>&nbsp;<tt> </tt>&nbsp;21.9<tt> </tt>&nbsp;<tt> </tt>&nbsp;i7-1260P
lma<tt> </tt>&nbsp;<tt> </tt>&nbsp;35.0?
jansky<tt> </tt>&nbsp;<tt> </tt>&nbsp;12.0?<tt> </tt>&nbsp;<tt> </tt>&nbsp;i9-12xxxK
</pre>
<p> 
<h2><a name='sect6' href='#toc6'>Install</a></h2>
Example from NEMO/usr/gravidy. See README file for dependencies
such as the BOOST library <br>
<pre>   cd $NEMO/usr/gravidy
   make clean install
   make cmp34
   
</pre>this will install the vanilla "cpu" version.   The "gpu" and "mpi" version
will need more guidance. <p>
The "cmp34" target will compare the results of
a direct run of gravidy with the same one of rungravidy. There should be
no differences. <p>

<p> 
<h2><a name='sect7' href='#toc7'>Author</a></h2>
Cristian Maureira-Fredes, and Pao Amaro-Seoane (gravidy),
Peter Teuben (rungravidy) 
<p> 
<h2><a name='sect8' href='#toc8'>Files</a></h2>
<br>
<pre>NEMO/usr/gravidy - root directory
rungravidy.c - example NEMO frontend
</pre>
<p> 
<h2><a name='sect9' href='#toc9'>Ads</a></h2>
@ads <A HREF=https://ui.adsabs.harvard.edu/abs/2018MNRAS.473.3113M> 2018MNRAS.473.3113M </A>
<p> 
<h2><a name='sect10' href='#toc10'>See Also</a></h2>
<a href='nbody1.1.html'>nbody1(1NEMO)</a>
, <a href='snapshot.5.html'>snapshot(5NEMO)</a>
 <p>
Maureira-Fredes,
C and Amaro-Seoane, P. "GraviDy, a GPU modular, parallel direct-summation
N-body integrator: Dynamics with softening", MNRAS, vol. 473, pp. 3113-3127,
Jan . 2018.  <a href='https://ui.adsabs.harvard.edu/abs/2018MNRAS.473.3113M'>https://ui.adsabs.harvard.edu/abs/2018MNRAS.473.3113M</a>
 <p>
<a href='http://github.com/cmaureir/gravidy.git'>http://github.com/cmaureir/gravidy.git</a>


<p> 
<h2><a name='sect11' href='#toc11'>History</a></h2>
<br>
<pre>12-feb-2017<tt> </tt>&nbsp;<tt> </tt>&nbsp;example added<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
6-apr-2023<tt> </tt>&nbsp;<tt> </tt>&nbsp;add install note<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
16-jun-2023<tt> </tt>&nbsp;<tt> </tt>&nbsp;(rungravidy v0.4 now using gravidy default parameters<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
21-jun-2023<tt> </tt>&nbsp;<tt> </tt>&nbsp;fixed gravidy last duplicated snapshot<tt> </tt>&nbsp;<tt> </tt>&nbsp;PJT
</pre><p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Parameters</a></li>
<li><a name='toc4' href='#sect4'>Example</a></li>
<li><a name='toc5' href='#sect5'>Benchmark</a></li>
<li><a name='toc6' href='#sect6'>Install</a></li>
<li><a name='toc7' href='#sect7'>Author</a></li>
<li><a name='toc8' href='#sect8'>Files</a></li>
<li><a name='toc9' href='#sect9'>Ads</a></li>
<li><a name='toc10' href='#sect10'>See Also</a></li>
<li><a name='toc11' href='#sect11'>History</a></li>
</ul>
</body>
</html>
