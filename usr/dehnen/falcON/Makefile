# -*- makefile -*-
################################################################################
#
# Makefile for the falcON project
#
################################################################################
default		: all
ifdef NEMO
tonemo		: all
			-cp $(LIB)/libfalcON.so $(NEMOLIB)
			-cp $(BIN)/* $(NEMOBIN) >& /dev/null
install		: tonemo man
else
install		: all man
endif

COMPILER	:= gcc
#COMPILER	:= pgcc
#COMPILER	:= icc

DSOFT 		:= -DfalcON_INDI #allow for individual softening length         

makepublic 	:= Makefile make.defs make.public

include make.defs
include make.public

################################################################################
# pjt (probably not needed anymore now)


FS = falcon_start

fs:	$(FS)
	@echo "File $(FS) has (already) been created for your c-shell to source"   

$(FS):
	@echo '# this file automatically generated by "make fs", do not edit'   > $(FS)
	@echo '# it is meant for those who use this outside the NEMO env'      >> $(FS)
	@echo 'setenv FALCON `pwd`'                                      >> $(FS)
	@echo 'setenv FALCONBIN $$FALCON/'$(MACHTYPE)_$(OSTYPE)           >> $(FS)
	@echo 'setenv FALCONLIB $$FALCONBIN/lib'                          >> $(FS)
	@echo 'setenv PATH $${FALCONBIN}:$$PATH'                           >> $(FS)
	@echo 'if ( $$?LD_LIBRARAY_PATH) then'                            >> $(FS)
	@echo '  setenv LD_LIBRARAY_PATH $${FALCONLIB}:$$LD_LIBRARY_PATH'  >> $(FS) 
	@echo 'else'                                                     >> $(FS)
	@echo '  setenv LD_LIBRARAY_PATH $${FALCONLIB}'                   >> $(FS)
	@echo 'endif'                                                    >> $(FS)

ifdef NEMO
include Makefile.nemo
endif
