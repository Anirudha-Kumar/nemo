.TH get_bodiesfunc 1falcON "07 November 2004"

.SH Name
get_bodiesfunc() \- obtain a \fIbodiesfunc(5falcON)\fP function.

.SH Synopsis
\fBfalcON/inc/public/bodyfunc.h\fP
.PP
\fB
typedef void (*Bf_pter)  (bodies const&, double const&, const real*)
.br
typedef bool (*Bf_b_pter)(bodies const&, double const&, const real*)
.br
typedef int  (*Bf_i_pter)(bodies const&, double const&, const real*)
.br
typedef real (*Bf_r_pter)(bodies const&, double const&, const real*)
.br
typedef vect (*Bf_v_pter)(bodies const&, double const&, const real*)
.PP

.BI "struct bodiesfunc {"
.br
.BI "	Bf_pter	" func ";"
.br
.BI "	char		" type ";"
.br
.BI "	int		" npar ";"
.br
.BI "	io		" need ";"
.br
.BI "};"
.PP
.fP
.BI "bool get_bodiesfunc(bodyfunc&" Bf ", const char*" expr ");"
.SH Description
\fIbodiesfunc\fP functions take a set of bodies, simulation time, and
a set of up to ten real-valued parameters and return either an
integer, a real-valued scalar, or a vector. They are generated on the
fly (as the user runs a program) from an user-supplied expression
string by envoking the C++ compiler
.sp
The struct \fBbodiesfunc\fP contains the generic pointer \fIfunc\fP to
a function taking a set of bodies, time, and up to 10 real-valued
parameters. The \fItype\fP is either '\fBb\fP', '\fBi\fP', '\fBr\fP',
or '\fBv\fP' and indicates the specific type of the function
\fIfunc\fP points to. According to the \fItype\fP, the pointer
\fIfunc\fP must be parsed into either or the specific types
\fBBf_b_pter\fP, \fBBf_i_pter\fP, \fBBf_r_pter\fP, or \fBBf_v_pter\fP.
.br
The elements \fInpar\fP and \fIneed\fP indicate, respectively, how
many parameters and which body data are required to evaluate the
function pointed to by \fIfunc\fP.
.sp
\fBget_bodiesfunc()\fP generates on the fly a \fBbodiesfunc\fP from the
expression \fIexpr\fP by invoking the C++ compiler twice: once to
obtain the \fItype\fP and \fIneed\fP information and a second time to
generate \fIfunc\fP (for which the \fItype\fP must be known). On
success \fBget_bodiesfunc()\fP returns true.
.sp
The expression \fIexpr\fP must be a valid \fIbodiesfunc(5falcON)\fP expression.

.SH Caveats
Because \fBget_bodiesfunc()\fP relies on the C++ compiler to generate
information and function, most syntax errors in the
\fIbodiesfunc(5falcON)\fP expression will result in compiler errors and
are not analysed and reported in any detail. The experienced user may
inspect the C++ source code and the compiler output, which are reported
to stderr if debug>=2.

.SH See Also
bodiesfunc(5falcON)
.SH Author
Walter Dehnen
.SH Update History
.nf
.ta +1.0i +6.0i
21-jul-2004 Created	WD
07-nov-2004 parameters added, changed cond#expr to expr@cond	WD
.fi
