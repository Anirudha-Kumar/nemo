.TH get_bodyfunc 1falcON "07 November 2004"

.SH Name
get_bodyfunc() \- obtain a \fIbodyfunc(5falcON)\fP function.

.SH Synopsis
\fBfalcON/inc/public/bodyfunc.h\fP
.PP
\fB
typedef void (*bf_pter)  (body const&, double const&, const real*)
.br
typedef bool (*bf_b_pter)(body const&, double const&, const real*)
.br
typedef int  (*bf_i_pter)(body const&, double const&, const real*)
.br
typedef real (*bf_r_pter)(body const&, double const&, const real*)
.br
typedef vect (*bf_v_pter)(body const&, double const&, const real*)
.PP

.BI "struct bodyfunc {"
.br
.BI "	bf_pter	" func ";"
.br
.BI "	char		" type ";"
.br
.BI "	int		" npar ";"
.br
.BI "	io		" need ";"
.br
.BI "};"
.PP
.fP
.BI "bool get_bodyfunc(bodyfunc&" bf ", const char*" expr ");"
.SH Description
\fIbodyfunc\fP functions take a body, simulation time, and a set of up
to ten real-valued parameters and return either an integer, a
real-valued scalar, or a vector. They are generated on the fly (as the
user runs a program) from an user-supplied expression string by
envoking the C++ compiler
.sp
The struct \fBbodyfunc\fP contains the generic pointer \fIfunc\fP to a
function taking a body and time. The \fItype\fP is either '\fBb\fP', '\fBi\fP', '\fBr\fP', or '\fBv\fP' and indicates the specific type of
the function \fIfunc\fP points to. According to the \fItype\fP, the
pointer \fIfunc\fP must be parsed into either or the specific types
\fBbf_b_pter\fP, \fBbf_i_pter\fP, \fBbf_r_pter\fP, or \fBbf_v_pter\fP.
.br
The elements \fInpar\fP and \fIneed\fP indicate, respectively, how
many parameters and which body data are required to evaluate the
function pointed to by \fIfunc\fP.
.sp
\fBget_bodyfunc()\fP generates on the fly a \fBbodyfunc\fP from the
expression \fIexpr\fP by invoking the C++ compiler twice: once to
obtain the \fItype\fP and \fIneed\fP information and a second time to
generate \fIfunc\fP (for which the \fItype\fP must be known). On
success \fBget_bodyfunc()\fP returns true.
.sp
The expression \fIexpr\fP must be a valid \fIbodyfunc(5falcON)\fP expression.

.SH Caveats
Because \fBget_bodyfunc()\fP relies on the C++ compiler to generate
information and function, any syntax errors in the
\fIbodyfunc(5falcON)\fP expression will result in compiler errors and
are not analysed and reported in any detail. The experienced user may
inspect the C++ source code and the compiler output, which are reported
to stderr if debug>=2.

.SH See Also
bodyfunc(5falcON)
.SH Author
Walter Dehnen
.SH Update History
.nf
.ta +1.0i +4.0i
21-jul-2004 Created	WD
07-nov-2004 parameters added	WD
.fi
