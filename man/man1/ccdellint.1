.TH CCDELLINT 1NEMO "25 November 2022"

.SH "NAME"
ccdellint \- integrate map or cube in elliptical rings

.SH "SYNOPSIS"
\fBccdellint\fP [parameter=value]

.SH "DESCRIPTION"
\fBccdellint\fP integrates a Position-Position-Velocity (PPV) cube in elliptical annuli
in the first two dimensions, reducing it to a Radius-Velocity (RV) image.
.PP
This program also handles 2D images, in which case the output is a table, consisting
of 6 columns:
.nf

   rad = outer radius of the annulus;
   npix = number of pixels in the annulus;
   int = average in the annulus; (no support for median yet)
   rms = rms in the annulus;
   sum = sum in the annulus;
   cumsum = cumulative sum for all annuli so far.
   
.fi
This is the same order and meaning as the table from \fIellint(1MIRIAD)\fP.
.PP
The particle based program \fIsnapshell(1NEMO)\fP does something similar in 3D.

.SH "PARAMETERS"
.so man1/parameters
.TP 20
\fBin=\fP
input data cube. No default.   
.TP
\fBradii=\fP
radii of the ring boundaries (Nring+1) [] 
.TP
\fBpa=\fP
position angle of disk, astronomical convention. [0]   
.TP
\fBinc=\fP
inclination angle of disk [45]   
.TP
\fBcenter=\fP
rotation center (mapcenter if left blank, 0,0=lower left)
.TP
\fBvsys=\fP
systemic velocity. Only needed for cube. [0]     
.TP
\fBblank=\fP
Value of the blank pixel to be ignored [0.0]
.TP
\fBnorm=\fP
Normalize values to number of pixels in ring. This only has an effect on the image
written, not on the table, which uses both.  [t]
.TP
\fBout=\fP
RV image, useful for 3D cubes. If not given, no image will be written. Default: not used
.TP
\fBtab=\fP
Output table, useful for 2D images. If not give, no table will be written. Default: not used
.TP
\fBrscale=\fP
Convenience factor by which radii are multiplied for display in the table. For FITS images
this is usually 3600.  [1]
.TP
\fBiscale=\fP
Convenience factor by which intensities are multiplied for display in the table. For FITS images
this is usually 1 / (1.133*(beam/pixel)**2).  [1]

.SH "CAVEATS"
As with most of these codes, the center of pixel determines to which ring the pixel belongs in it total.

.SH "EXAMPLES"
Example of generating a gaussian profile from a 2D gauss image
.nf

% ccdgen out=- object=gauss spar=1,50 size=128,128 | ccdellint - 0:100:5 tab=-
  5 60 0.997956 0.00130234 59.8774 59.8774
  10 164 0.99048 0.00395266 162.439 222.316
  ...
  95 752 0.354992 0.0438741 266.954 9807.25
  100 464 0.300485 0.0282898 139.425 9946.68

.fi
.PP
For a map in K.km/s that needs to be converted to Jy.km/s, with Jy/K=2.5 and a beam of 12.65 arcsec and
5.5 pixels there are 6 points per beam, therefore the rscale=3600 is needed to view the table in arcsec,
and iscale=2.5/6 for viewing in Jy.km/s:
.nf

  % fitsccd M100_97520_99703.mom0.fits  - |\\
       ccdellint - 0:250/3600:10/3600 pa=150 inc=40 center=45,45 rscale=3600 iscale=1.41/0.65/6.00 tab=-
  10 7 16.3524 0 114.467 114.467
  20 24 11.824 0 283.776 398.243
  ..
  240 290 0.0505762 0 14.6671 3057.86
  250 241 -0.0573514 0 -13.8217 3044.04
  
.fi

.PP
Some examples of PPV->RV
.nf
  % fitsccd ngc6503.cube.fits - |\\
      ccdellint - 0:1000/3600:10/3600 pa=-60 inc=40 center=163,122 out=ngc6503.rv.ccd norm=f

.fi
.SH "SEE ALSO"
ccdzshift(1NEMO), ellipse(1NEMO), snapshell(1NEMO), image(5NEMO)

.SH "FILES"
NEMO/src/image/misc/ccdellint.c

.SH "AUTHOR"
Peter Teuben

.SH "UPDATE HISTORY"
.nf
.ta +1.0i +4.0i
30-nov-2020	V0.1 drafted	PJT
23-nov-2022	V0.3 confirmed 2D images, added table output	PJT
.fi
