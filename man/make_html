#! /bin/csh -f
#
#  calling this script will create html-ized man pages 
#  I've not gotten man2html to work quite, there appear
#  to be at least 2 different versions available,
#  one from http://www.oac.uci.edu/indiv/ehood/man2html.html
#  the other one comes with the linux man package (author unknown)
#
#  I personally prefer gman (a Gnome utility), though tkman and xman
#  are also not bad

if ($#argv == 0) then
  set copy=0
else
  set html_dir=$1
  if (-e $html_dir) then
    set copy=1
  else
    set copy=0
    echo Warning: WWW directory $html_dir does not exist
  endif
endif

set manlevels=(1 3 5 6 8 l)

cd $NEMO/man
if (! -e html) mkdir html

#				this method uses rman

foreach d ($manlevels)
 set dir=man$d
 foreach file ($dir/*.$d)
   set base=$file:t
   rman -f HTML $file  >  html/$base.html
 end
make_man.csh $d > html/index$d.html
end

make_whatis.csh > html/whatis.html

set o=html/index.html

set date=(`date`)
set host=(`hostname`)

cat > $o <<EOF_HTML
<HTML> 
<HEAD> 
<TITLE>NEMO Manual Pages </TITLE>  
</HEAD>
<BODY> 
<!-- do not edit this file; created by $0 --> 
<H1>Nemo Reference Manual</H1>
<UL>
<LI> <A HREF=index1.html>man1</A> (programs)
<LI> <A HREF=index3.html>man3</A> (functions)
<LI> <A HREF=index5.html>man5</A> (file formats)
<LI> <A HREF=index6.html>man6</A> (hardware)
<LI> <A HREF=index8.html>man8</A> (administrativia)
<LI> <A HREF=indexl.html>manl</A> (non-NEMO local programs in NEMO)
<LI> <A HREF=whatis.html>whatis</A> pages. 
</UL>
<hr>
Automatically created by make_html on $host $date <P>
</BODY></HTML>
EOF_HTML

if ($copy) then
  echo Copying html files to $html_dir
  cp html/* $html_dir
else
  echo No copy made of html directory
endif
